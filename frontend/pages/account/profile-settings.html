<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إعدادات الحساب | BrandMe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
        :root {
            --color-background: #F9FAFB;
            --color-card: #FFFFFF;
            --color-primary: #2563EB;
            --color-secondary: #9CA3AF;
            --color-success: #22C55E;
            --color-error: #EF4444;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background);
        }
        
        .brand-gradient {
            background: linear-gradient(135deg, var(--color-primary) 0%, #3B82F6 100%);
        }
        
        .settings-container {
            background-color: #F3F4F6;
        }
        
        .settings-card {
            transition: all 0.3s ease;
        }
        
        .settings-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--color-primary);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        .nav-item {
            transition: all 0.2s ease;
        }
        
        .nav-item:hover {
            background-color: #E5E7EB;
        }
        
        .nav-item.active {
            background-color: var(--color-primary);
            color: white;
        }
        
        .btn-primary {
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.3);
        }
        
        .btn-secondary {
            transition: all 0.2s ease;
        }
        
        .btn-secondary:hover {
            background-color: var(--color-background);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .success-message {
            animation: slideDown 0.5s ease forwards;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading-spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--color-primary);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            animation: slideDown 0.5s ease forwards;
        }
    </style>
</head>
<body class="min-h-screen settings-container">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <i data-feather="shield" class="text-indigo-600 w-8 h-8"></i>
                        <span class="ml-2 text-xl font-bold text-gray-900">BrandMe</span>
                    </div>
                    <nav class="hidden md:ml-6 md:flex md:items-center md:space-x-4 mr-6">
                        <a href="index.html" class="px-3 py-2 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors">الرئيسية</a>
                        <a href="dashboard.html" class="px-3 py-2 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors">لوحة التحكم</a>
                        <a href="#" class="px-3 py-2 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors">المطورون</a>
                    </nav>
                </div>
                <div class="flex items-center">
                    <a href="login.html" class="px-4 py-2 text-sm font-medium text-gray-700 hover:text-indigo-600 transition-colors">
                        تسجيل الخروج
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Page Title -->
        <div class="mb-8 fade-in">
            <h1 class="text-3xl font-bold text-gray-900">إعدادات الحساب</h1>
            <p class="text-gray-600 mt-2">إدارة بريدك الوهمي، البريد الأساسي، وإشعاراتك.</p>
        </div>

        <!-- Success Message (Hidden by default) -->
        <div id="successMessage" class="hidden success-message bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
                <i data-feather="check-circle" class="text-green-600 w-5 h-5 ml-2"></i>
                <span class="text-green-800 font-medium">تم حفظ التغييرات بنجاح</span>
            </div>
        </div>

        <!-- Error Message (Hidden by default) -->
        <div id="errorMessage" class="hidden error-message bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
                <i data-feather="alert-circle" class="text-red-600 w-5 h-5 ml-2"></i>
                <span id="errorText" class="text-red-800 font-medium">حدث خطأ أثناء حفظ التغييرات</span>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-1 gap-6">
            <!-- Personal Information Card -->
            <div class="bg-white rounded-xl shadow-md p-6 settings-card fade-in">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-semibold text-gray-900">المعلومات الشخصية</h2>
                    <i data-feather="user" class="text-indigo-600 w-5 h-5"></i>
                </div>
                
                <div class="space-y-4">
                    <div class="profile-info__email">
                        <label class="block text-sm font-medium text-gray-700 mb-2">البريد الأساسي</label>
                        <div class="flex items-center justify-between">
                            <span id="userEmail" class="text-gray-600">mohamed.ahmed@example.com</span>
                            <button type="button" class="btn-secondary text-indigo-600 hover:text-indigo-800 text-sm font-medium px-3 py-1 border border-gray-300 rounded-md transition-colors" onclick="openEmailModal()">
                                <i data-feather="edit" class="w-4 h-4 ml-1"></i>
                                تعديل
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">سيتم إرسال رسالة تفعيل إلى البريد الجديد عند التغيير</p>
                    </div>
                    
                    <div class="profile-info__username">
                        <label class="block text-sm font-medium text-gray-700 mb-2">اسم المستخدم (اختياري)</label>
                        <div class="flex items-center">
                            <input type="text" id="username" value="محمد أحمد" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <button type="button" class="btn-secondary text-gray-600 hover:text-gray-800 text-sm font-medium px-3 py-2 mr-2 border border-gray-300 rounded-md transition-colors" onclick="updateUsername()">
                                حفظ
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Virtual Email Settings Card -->
            <div class="bg-white rounded-xl shadow-md p-6 settings-card fade-in">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-semibold text-gray-900">إعدادات البريد الوهمي</h2>
                    <i data-feather="mail" class="text-indigo-600 w-5 h-5"></i>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">حالة البريد الوهمي</label>
                            <span id="virtualEmailStatus" class="text-sm text-green-600 font-medium">نشط</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="virtualEmailToggle" checked onchange="toggleVirtualEmail()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">البريد الوهمي الحالي</label>
                        <div class="flex items-center justify-between">
                            <span id="virtualEmail" class="text-gray-600">mohamed123@brandme.me</span>
                            <button type="button" class="btn-secondary text-indigo-600 hover:text-indigo-800 text-sm font-medium px-3 py-1 border border-gray-300 rounded-md transition-colors" onclick="regenerateVirtualEmail()">
                                <i data-feather="refresh-cw" class="w-4 h-4 ml-1"></i>
                                إعادة توليد
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">سيتم إنشاء بريد وهمي جديد وفصل جميع المواقع المرتبطة بالبريد الحالي</p>
                    </div>
                </div>
            </div>

            <!-- Notifications Settings Card -->
            <div class="bg-white rounded-xl shadow-md p-6 settings-card fade-in">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-semibold text-gray-900">إعدادات الإشعارات</h2>
                    <i data-feather="bell" class="text-indigo-600 w-5 h-5"></i>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">إشعارات رسائل جديدة</label>
                            <span class="text-sm text-gray-600">تلقي إشعارات عند وصول رسائل جديدة</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="messageNotifications" checked onchange="updateNotificationSettings()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">تحذيرات الأمان</label>
                            <span class="text-sm text-gray-600">إشعارات حول النشاط المشبوه</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="securityNotifications" checked onchange="updateNotificationSettings()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">طريقة الإشعارات</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="emailMethod" class="rounded text-indigo-600 focus:ring-indigo-500" checked onchange="updateNotificationMethods()">
                                <span class="mr-2 text-sm text-gray-700">البريد الإلكتروني</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="dashboardMethod" class="rounded text-indigo-600 focus:ring-indigo-500" checked onchange="updateNotificationMethods()">
                                <span class="mr-2 text-sm text-gray-700">الإشعارات في لوحة التحكم</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Settings Card -->
            <div class="bg-white rounded-xl shadow-md p-6 settings-card fade-in">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-semibold text-gray-900">إعدادات الأمان</h2>
                    <i data-feather="shield" class="text-indigo-600 w-5 h-5"></i>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">المصادقة الثنائية (2FA)</label>
                            <span class="text-sm text-gray-600">طبقة أمان إضافية لحسابك</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="twoFactorAuth" onchange="toggleTwoFactorAuth()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">الأجهزة النشطة</label>
                        <div class="bg-gray-50 rounded-lg p-3">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center">
                                    <i data-feather="monitor" class="text-gray-500 w-4 h-4 ml-2"></i>
                                    <span class="text-sm text-gray-700">Windows - Chrome</span>
                                </div>
                                <span class="text-xs text-gray-500">نشط الآن</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i data-feather="smartphone" class="text-gray-500 w-4 h-4 ml-2"></i>
                                    <span class="text-sm text-gray-700">iPhone - Safari</span>
                                </div>
                                <span class="text-xs text-gray-500">منذ 2 ساعة</span>
                            </div>
                        </div>
                        <button type="button" class="text-xs text-indigo-600 hover:text-indigo-800 mt-2 transition-colors">
                            عرض جميع الأجهزة
                        </button>
                    </div>
                </div>
            </div>

            <!-- Save Changes Button -->
            <div class="bg-white rounded-xl shadow-md p-6 settings-card fade-in">
                <div class="flex justify-center">
                    <button id="saveChanges" class="btn-primary px-6 py-3 border border-transparent text-base font-medium rounded-md text-white brand-gradient hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all">
                        <span id="saveText">حفظ التغييرات</span>
                        <div id="saveSpinner" class="loading-spinner hidden mr-2"></div>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Email Change Modal (Hidden by default) -->
    <div id="emailModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">تغيير البريد الإلكتروني</h3>
            <div class="mb-4">
                <label for="newEmail" class="block text-sm font-medium text-gray-700 mb-2">البريد الإلكتروني الجديد</label>
                <input type="email" id="newEmail" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
            <div class="flex justify-end space-x-2">
                <button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors" onclick="closeEmailModal()">
                    إلغاء
                </button>
                <button type="button" class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors" onclick="updateEmail()">
                    تأكيد
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-16 py-8">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                    <i data-feather="shield" class="text-indigo-600 w-5 h-5"></i>
                    <span class="mr-2 text-sm text-gray-600">© 2025 BrandMe. جميع الحقوق محفوظة.</span>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-sm text-gray-500 hover:text-indigo-600 transition-colors">سياسة الخصوصية</a>
                    <a href="#" class="text-sm text-gray-500 hover:text-indigo-600 transition-colors">شروط الخدمة</a>
                    <a href="#" class="text-sm text-gray-500 hover:text-indigo-600 transition-colors">اتصل بنا</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // تهيئة Feather Icons
        feather.replace();
        
        // حالة التحميل
        let isLoading = false;
        
        // DOM Elements
        const saveChangesBtn = document.getElementById('saveChanges');
        const saveText = document.getElementById('saveText');
        const saveSpinner = document.getElementById('saveSpinner');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const emailModal = document.getElementById('emailModal');
        
        // جلب بيانات المستخدم عند التحميل
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
            
            // تأثيرات عند التحميل
            const cards = document.querySelectorAll('.fade-in');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
            });
        });
        
        // جلب بيانات المستخدم من API
        async function loadUserData() {
            try {
                const response = await axios.get('/api/user/profile');
                const userData = response.data;
                
                // تعبئة الحقول ببيانات المستخدم
                document.getElementById('userEmail').textContent = userData.email;
                document.getElementById('username').value = userData.username;
                document.getElementById('virtualEmail').textContent = userData.virtualEmail;
                document.getElementById('virtualEmailStatus').textContent = userData.virtualEmailActive ? 'نشط' : 'غير نشط';
                document.getElementById('virtualEmailToggle').checked = userData.virtualEmailActive;
                document.getElementById('messageNotifications').checked = userData.messageNotifications;
                document.getElementById('securityNotifications').checked = userData.securityNotifications;
                document.getElementById('emailMethod').checked = userData.notificationMethods.email;
                document.getElementById('dashboardMethod').checked = userData.notificationMethods.dashboard;
                document.getElementById('twoFactorAuth').checked = userData.twoFactorAuth;
            } catch (error) {
                console.error('Error loading user data:', error);
                showError('حدث خطأ أثناء تحميل بيانات المستخدم');
            }
        }
        
        // تحديث اسم المستخدم
        async function updateUsername() {
            const username = document.getElementById('username').value;
            
            setLoadingState(true);
            
            try {
                await axios.patch('/api/user/profile', { username });
                showSuccess('تم تحديث اسم المستخدم بنجاح');
            } catch (error) {
                console.error('Error updating username:', error);
                showError(error.response?.data?.message || 'حدث خطأ أثناء تحديث اسم المستخدم');
            } finally {
                setLoadingState(false);
            }
        }
        
        // تبديل حالة البريد الوهمي
        async function toggleVirtualEmail() {
            const isActive = document.getElementById('virtualEmailToggle').checked;
            
            setLoadingState(true);
            
            try {
                await axios.patch('/api/user/virtual-email', { active: isActive });
                document.getElementById('virtualEmailStatus').textContent = isActive ? 'نشط' : 'غير نشط';
                document.getElementById('virtualEmailStatus').classList.toggle('text-green-600', isActive);
                document.getElementById('virtualEmailStatus').classList.toggle('text-red-600', !isActive);
                showSuccess(`تم ${isActive ? 'تفعيل' : 'إيقاف'} البريد الوهمي بنجاح`);
            } catch (error) {
                console.error('Error toggling virtual email:', error);
                document.getElementById('virtualEmailToggle').checked = !isActive;
                showError(error.response?.data?.message || 'حدث خطأ أثناء تغيير حالة البريد الوهمي');
            } finally {
                setLoadingState(false);
            }
        }
        
        // إعادة توليد البريد الوهمي
        async function regenerateVirtualEmail() {
            if (!confirm('هل أنت متأكد من إعادة توليد البريد الوهمي؟ سيتم فصل جميع المواقع المرتبطة بالبريد الحالي.')) {
                return;
            }
            
            setLoadingState(true);
            
            try {
                const response = await axios.post('/api/user/regenerate-virtual-email');
                document.getElementById('virtualEmail').textContent = response.data.newEmail;
                showSuccess('تم إعادة توليد البريد الوهمي بنجاح');
            } catch (error) {
                console.error('Error regenerating virtual email:', error);
                showError(error.response?.data?.message || 'حدث خطأ أثناء إعادة توليد البريد الوهمي');
            } finally {
                setLoadingState(false);
            }
        }
        
        // تحديث إعدادات الإشعارات
        async function updateNotificationSettings() {
            const settings = {
                messageNotifications: document.getElementById('messageNotifications').checked,
                securityNotifications: document.getElementById('securityNotifications').checked
            };
            
            try {
                await axios.patch('/api/user/notifications', settings);
                showSuccess('تم تحديث إعدادات الإشعارات بنجاح');
            } catch (error) {
                console.error('Error updating notification settings:', error);
                showError(error.response?.data?.message || 'حدث خطأ أثناء تحديث إعدادات الإشعارات');
            }
        }
        
        // تحديث طرق الإشعارات
        async function updateNotificationMethods() {
            const methods = {
                email: document.getElementById('emailMethod').checked,
                dashboard: document.getElementById('dashboardMethod').checked
            };
            
            try {
                await axios.patch('/api/user/notification-methods', methods);
                showSuccess('تم تحديث طرق الإشعارات بنجاح');
            } catch (error) {
                console.error('Error updating notification methods:', error);
                showError(error.response?.data?.message || 'حدث خطأ أثناء تحديث طرق الإشعارات');
            }
        }
        
        // تبديل المصادقة الثنائية
        async function toggleTwoFactorAuth() {
            const isEnabled = document.getElementById('twoFactorAuth').checked;
            
            setLoadingState(true);
            
            try {
                if (isEnabled) {
                    // تفعيل المصادقة الثنائية
                    await axios.post('/api/user/enable-2fa');
                    showSuccess('تم تفعيل المصادقة الثنائية بنجاح');
                } else {
                    // إيقاف المصادقة الثنائية
                    await axios.post('/api/user/disable-2fa');
                    showSuccess('تم إيقاف المصادقة الثنائية بنجاح');
                }
            } catch (error) {
                console.error('Error toggling 2FA:', error);
                document.getElementById('twoFactorAuth').checked = !isEnabled;
                showError(error.response?.data?.message || 'حدث خطأ أثناء تغيير إعدادات المصادقة الثنائية');
            } finally {
                setLoadingState(false);
            }
        }
        
        // فتح نافذة تعديل البريد الإلكتروني
        function openEmailModal() {
            emailModal.classList.remove('hidden');
        }
        
        // إغلاق نافذة تعديل البريد الإلكتروني
        function closeEmailModal() {
            emailModal.classList.add('hidden');
        }
        
        // تحديث البريد الإلكتروني
        async function updateEmail() {
            const newEmail = document.getElementById('newEmail').value;
            
            if (!newEmail) {
                showError('يرجى إدخال بريد إلكتروني جديد');
                return;
            }
            
            setLoadingState(true);
            
            try {
                await axios.patch('/api/user/profile', { email: newEmail });
                document.getElementById('userEmail').textContent = newEmail;
                closeEmailModal();
                showSuccess('تم إرسال رسالة التفعيل إلى بريدك الجديد');
            } catch (error) {
                console.error('Error updating email:', error);
                showError(error.response?.data?.message || 'حدث خطأ أثناء تحديث البريد الإلكتروني');
            } finally {
                setLoadingState(false);
            }
        }
        
        // حفظ جميع التغييرات
        saveChangesBtn.addEventListener('click', async function() {
            // في هذا التصميم، كل عنصر يحفظ تلقائياً عند التغيير
            // هذا الزر يعمل كزر تأكيد نهائي
            showSuccess('تم حفظ جميع التغييرات بنجاح');
        });
        
        // تعيين حالة التحميل
        function setLoadingState(loading) {
            isLoading = loading;
            
            if (loading) {
                saveText.textContent = 'جاري الحفظ...';
                saveSpinner.classList.remove('hidden');
                saveChangesBtn.disabled = true;
            } else {
                saveText.textContent = 'حفظ التغييرات';
                saveSpinner.classList.add('hidden');
                saveChangesBtn.disabled = false;
            }
        }
        
        // عرض رسالة النجاح
        function showSuccess(message = 'تم حفظ التغييرات بنجاح') {
            successMessage.querySelector('span').textContent = message;
            successMessage.classList.remove('hidden');
            errorMessage.classList.add('hidden');
            
            // إخفاء الرسالة بعد 3 ثوان
            setTimeout(() => {
                successMessage.classList.add('hidden');
            }, 3000);
            
            // تأثير على الزر
            saveChangesBtn.classList.add('opacity-50');
            setTimeout(() => {
                saveChangesBtn.classList.remove('opacity-50');
            }, 300);
        }
        
        // عرض رسالة الخطأ
        function showError(message) {
            errorText.textContent = message;
            errorMessage.classList.remove('hidden');
            successMessage.classList.add('hidden');
            
            // إخفاء الرسالة بعد 5 ثوان
            setTimeout(() => {
                errorMessage.classList.add('hidden');
            }, 5000);
        }
    </script>
</body>
</html>
